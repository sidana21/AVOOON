# Aviator Betting Game مع لوحة تحكم الإدارة

## نظرة عامة
هذا مشروع متكامل للعبة Aviator (لعبة رهان الطائرة) مع لوحة تحكم إدارية كاملة. يتيح للاعبين المراهنة على الطائرة وسحب أرباحهم قبل أن تطير، بينما يمكن للإداريين مراقبة جميع الأنشطة والإحصائيات.

## الميزات الرئيسية

### للاعبين:
- واجهة لعبة تفاعلية مع رسوم متحركة للطائرة
- نظام رهان واقعي مع مضاعفات عشوائية
- حفظ الرصيد والبيانات في قاعدة بيانات
- تتبع تلقائي لسجل الجولات السابقة
- رصيد ابتدائي: €3000

### للإداريين:
- لوحة تحكم شاملة بالعربية
- إحصائيات مباشرة (عدد اللاعبين، الرهانات، الأرباح، خسائر اللاعبين)
- عرض قائمة اللاعبين مع تفاصيل كل لاعب
- سجل كامل للرهانات مع الحالة (فوز/خسارة)
- سجل الجولات مع المضاعفات
- نظام تسجيل دخول آمن

## البنية التقنية

### Backend (Flask - Python)
- **Framework**: Flask 3.1.2
- **Database**: SQLite (aviator_game.db)
- **API**: RESTful API للتواصل مع Frontend
- **Authentication**: Flask Sessions للإدارة

### Frontend
- **Game Interface**: HTML5 Canvas + JavaScript
- **Admin Panel**: HTML5 + CSS3 + JavaScript
- **Styling**: Custom CSS مع تصميم متجاوب

### قاعدة البيانات
الجداول:
- `admins`: معلومات تسجيل دخول الإداريين
- `players`: بيانات اللاعبين والأرصدة
- `game_rounds`: سجل جولات اللعبة
- `bets`: سجل جميع الرهانات
- `settings`: إعدادات اللعبة

## كيفية الاستخدام

### الوصول للعبة:
1. افتح الرابط الرئيسي: `/`
2. ستحصل تلقائياً على معرف لاعب فريد
3. الرصيد الابتدائي: €3000
4. ضع رهانك واضغط "BET"
5. اسحب أرباحك قبل أن تطير الطائرة بالضغط على "Cash Out"

### الوصول للوحة التحكم:
1. افتح: `/admin`
2. **اسم المستخدم**: `admin`
3. **كلمة المرور**: `admin123`
4. شاهد جميع الإحصائيات والبيانات المباشرة

## API Endpoints

### للعبة:
- `GET /api/player/{player_id}/balance` - الحصول على رصيد اللاعب
- `POST /api/player/{player_id}/bet` - وضع رهان جديد
- `POST /api/bet/{bet_id}/cashout` - سحب الرهان
- `POST /api/round/end` - إنهاء جولة

### للإدارة:
- `POST /admin/login` - تسجيل دخول الإدارة
- `GET /admin/logout` - تسجيل الخروج
- `GET /api/stats` - الحصول على الإحصائيات العامة
- `GET /api/players` - قائمة اللاعبين
- `GET /api/bets` - سجل الرهانات
- `GET /api/rounds` - سجل الجولات

## الملفات الرئيسية

```
├── app.py                      # Backend Flask
├── aviator_game.db             # قاعدة البيانات SQLite
├── templates/
│   ├── game.html              # واجهة اللعبة
│   ├── admin_login.html       # صفحة تسجيل الدخول
│   └── admin_dashboard.html   # لوحة التحكم
├── static/
│   ├── css/
│   │   └── style.css         # تنسيقات اللعبة
│   ├── js/
│   │   └── game.js           # منطق اللعبة
│   └── img/
│       └── aviator_jogo.png  # صورة الطائرة
```

## الإعدادات الافتراضية
- الرصيد الابتدائي: €3000
- الحد الأدنى للرهان: €1
- الحد الأقصى للرهان: €1000
- مدة الانتظار بين الجولات: 8 ثواني
- المضاعف العشوائي: من 0.8x إلى 10x

## التطوير

### تشغيل المشروع:
```bash
python3 app.py
```
الخادم سيعمل على: http://0.0.0.0:5000

### المتطلبات:
- Python 3.11+
- Flask 3.1.2
- Flask-CORS 6.0.1

## الأمان
- كلمات المرور مشفرة باستخدام SHA256
- جلسات آمنة للإدارة
- معرفات فريدة للاعبين
- حماية من CSRF

## التحديثات الأخيرة
- 2025-10-22: إضافة لوحة تحكم الإدارة الكاملة
- 2025-10-22: ربط اللعبة بقاعدة البيانات
- 2025-10-22: إنشاء API شامل
- 2025-10-22: إعداد المشروع في بيئة Replit

## ملاحظات
- قاعدة البيانات محلية (SQLite) - مناسبة للتطوير والاختبار
- للإنتاج، يُنصح باستخدام PostgreSQL
- يمكن تغيير كلمة مرور الإدارة من قاعدة البيانات
- البيانات محفوظة حتى بعد إعادة التشغيل

## تفضيلات المستخدم
- اللغة المفضلة: العربية
- نظام الإدارة مصمم بالكامل بالعربية
